# 03 ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ì´í•´ 2 - ê°ì²´ ì§€í–¥ ì›ë¦¬ ì ìš©

## ìƒˆë¡œìš´ í• ì¸ ì •ì±… ê°œë°œ

ì„œë¹„ìŠ¤ ì˜¤í”ˆ ì „ì— ê°‘ìê¸° í• ì¸ ì •ì±…ì´ ë³€ê²½ëœë‹¤ë©´!?

- ğŸ‘¤ : ê³ ì • ê¸ˆì•¡ í• ì¸ì´ ì•„ë‹ˆë¼ ì£¼ë¬¸ ê¸ˆì•¡ ë‹¹ í• ì¸í•˜ëŠ” ì •ë¥  % í• ì¸ìœ¼ë¡œ ë³€ê²½í•˜ê³  ì‹¶ì–´ìš”.
- ê³„íšì„ ë”°ë¥´ê¸° ë³´ë‹¤ ë³€í™”ì— ëŒ€ì‘í•˜ê¸°ë¥¼ ì¶”êµ¬í•œë‹¤! (ì• ìì¼ ì„ ì–¸)

ì´ë²ˆì—ëŠ” ì£¼ë¬¸í•œ ê¸ˆì•¡ì˜ %ë¥¼ í• ì¸í•´ì£¼ëŠ” ì •ë¥  í• ì¸ì„ ê°œë°œí•´ë³´ì. 

í…ŒìŠ¤íŠ¸ ë§Œë“¤ê¸°

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fc6cb554-3ec5-44b4-b85f-f6f2521833ee/Untitled.png)

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/76c66c38-cac1-468c-b36e-9ec658135880/Untitled.png)

```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;

import static org.junit.jupiter.api.Assertions.*;

class RateDiscountPolicyTest {
    RateDiscountPolicy discountPolicy = new RateDiscountPolicy();

    @Test
    @DisplayName("VIPëŠ” 10% í• ì¸ì´ ì ìš©ë˜ì–´ì•¼ í•œë‹¤")
    void vip_o(){ //vipëŠ” ì ìš©ë˜ì–´ì•¼ í•œë‹¤.
        //given
        Member member = new Member(1L, "memberVIP", Grade.VIP);
        //when
        int discount = discountPolicy.discount(member, 10000);
        //then
        org.assertj.core.api.Assertions.assertThat(discount).isEqualTo(1000);
    }

}
```

í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/73174b43-4d32-4699-9ee2-fd74198a7738/Untitled.png)

@DisplayNameì´ ì˜ ì‹¤í–‰ëœë‹¤. 

ì„±ê³µ í…ŒìŠ¤íŠ¸ê°€ ì˜ ì‹¤í–‰ë˜ëŠ” ê²ƒë„ ì¤‘ìš”í•˜ì§€ë§Œ ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ë„ ê¼­ ë§Œë“¤ì–´ë´ì•¼ í•œë‹¤. 

```java
		@Test
    @DisplayName("VIPê°€ ì•„ë‹ˆë©´ í• ì¸ì´ ì ìš©ë˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.")
    void vip_x(){
        //given
        Member member = new Member(2L, "memberBASIC", Grade.BASIC);
        //when
        int discount = discountPolicy.discount(member, 10000);
        //then
        org.assertj.core.api.Assertions.assertThat(discount).isEqualTo(1000);
    }
```

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/22e91194-3e5d-49c4-a080-db1b155ff5f6/Untitled.png)

ì˜ˆìƒí•œ ê°’ì¸ 1000ì›ì´ ì•„ë‹ˆë¼ 0ì´ ë‚˜ì™”ë‹¤ê³  ë„ˆë¬´ë‚˜ ì¹œì ˆí•˜ê²Œ ë„ì›Œì¤Œ

ë‹¤ì‹œ 0ìœ¼ë¡œ ë°”ê¿”ì£¼ë©´

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7033ab0c-e6cd-4298-a644-3c8b2aedf019/Untitled.png)

ì˜ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 

## ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì ìš©ê³¼ ë¬¸ì œì 

ì ìš©í•´ë³´ì!

ìœ„ì—ì„œ ë§Œë“  RateDiscountPolicyë¥¼ ì‹¤ì œë¡œ ì ìš©í•˜ë ¤ë©´ OrderServiceImplë¡œ ë“¤ì–´ê°„ë‹¤. 

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e4909876-adb8-4654-ba02-a0076457ba25/Untitled.png)

ì›ë˜ëŠ” ê³ ì •ê¸ˆì•¡ í• ì¸ìœ¼ë¡œ ë“¤ì–´ê°€ ìˆì—ˆë‹¤. 

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4bb118ff-40c9-4b89-98a8-fc18c00b31e9/Untitled.png)

ê³ ì • ê¸ˆì•¡ì„ ì •ë¥ ë¡œ ë³€ê²½í•´ì¤€ë‹¤.

âš ï¸ **ë¬¸ì œì **

- ì—­í• ê³¼ êµ¬í˜„ì„ ì¶©ì‹¤í•˜ê²Œ ë¶„ë¦¬í–ˆë‹¤ â†’ OK
- ë‹¤í˜•ì„±ë„ í™œìš©í•˜ê³ , ì¸í„°í˜ì´ìŠ¤ì™€ êµ¬í˜„ ê°ì²´ë¥¼ ë¶„ë¦¬í–ˆë‹¤ â†’ OK
- OCP, DIPê°™ì€ ê°ì²´ì§€í–¥ ì„¤ê³„ ì›ì¹™ì„ ì¶©ì‹¤íˆ ì¤€ìˆ˜í–ˆë‹¤ â†’ OK?
    - â†’ ê·¸ë ‡ê²Œ ë³´ì´ì§€ë§Œ ì‚¬ì‹¤ì€ ê·¸ê²Œ ì•„ë‹ˆë‹¤!
- DIP: ì£¼ë¬¸ì„œë¹„ìŠ¤ í´ë¼ì´ì–¸íŠ¸ (â€™OrderServiceImplâ€™)ëŠ” DiscountPolicy ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë©´ì„œ DIPë¥¼ ì§€í‚¨ ê²ƒ ê°™ì€ë°?
    - â†’ í´ë˜ìŠ¤ ì˜ì¡´ê´€ê³„ë¥¼ í•œë²ˆ ë¶„ì„í•´ë³´ì. ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤)ë¿ë§Œ ì•„ë‹ˆë¼ **êµ¬ì²´(êµ¬í˜„)í´ë˜ìŠ¤ì—ë„ ì˜ì¡´**í•˜ê³  ìˆë‹¤.
        - ì¶”ìƒ(ì¸í„°í˜ì´ìŠ¤) ì˜ì¡´: DiscountPolicy
        - êµ¬ì²´(êµ¬í˜„) í´ë˜ìŠ¤: FixDiscountPolicy, RateDiscountPolicy
- OCP: ë³€ê²½í•˜ì§€ ì•Šê³ ë„ í™•ì¥í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
    - â†’ **ì§€ê¸ˆ ì½”ë“œëŠ” ê¸°ëŠ¥ì„ í™•ì¥í•´ì„œ ë³€ê²½í•˜ë©´, í´ë¼ì´ì–¸íŠ¸ ì½”ë“œì— ì˜í–¥ì„ ì¤€ë‹¤!**
    - **OCPë¥¼ ìœ„ë°˜í•œë‹¤!**
    

**ì™œ í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í• ê¹Œ?**

í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ìœ¼ë¡œ ì˜ì¡´ê´€ê³„ë¥¼ ë¶„ì„í•´ë³´ì. 

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/31167539-7957-43f4-92a1-90f787097ead/Untitled.png)

ì§€ê¸ˆê¹Œì§€ ë‹¨ìˆœíˆ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•œë‹¤ê³  ìƒê°í–ˆë‹¤. 

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/52221c5c-122f-4f79-b689-7bf07c6c6c03/Untitled.png)

OrderServiceImplì€ DiscountPolicy ì¸í„°í˜ì´ìŠ¤ ë¿ë§Œ ì•„ë‹ˆë¼ FixDIscountPolicyì¸ êµ¬ì²´ í´ë˜ìŠ¤ë„ í•¨ê»˜ ì˜ì¡´í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. â†’ ***DIPìœ„ë°˜* (êµ¬ì²´ê°€ ì•„ë‹Œ ì¶”ìƒì— ì˜ì¡´í•˜ë¼)**

```java
public class OrderServiceImpl implements OrderService{
    private final MemberRepository memberRepository = new MemoryMemberRepository();
//    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
```

ë‘˜ ë‹¤ ì˜ì¡´í•˜ê³  ìˆë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4f9f7fa1-9b1c-4ee9-87f6-a42afd3cd683/Untitled.png)

FIx â†’ Rateë¡œ ë³€ê²½í•˜ëŠ” ìˆœê°„ OrderServiceImplì˜ ì†ŒìŠ¤ì½”ë“œë„ í•¨ê»˜ ë³€ê²½í•´ì•¼ í•œë‹¤! **OCPìœ„ë°˜***

ì¦‰, ì°¨ë¥¼ ë°”ê¿¨ë‹¤ê³  ìš´ì „ë©´í˜€ì¦ì„ ê°±ì‹ í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•œ ê²ƒì´ë‹¤. 

### ì–´ë–»ê²Œ í•´ê²°í•  ìˆ˜ ìˆì„ê¹Œ?

- DIPë¥¼ ìœ„ë°˜í•˜ì§€ ì•Šë„ë¡ ì¸í„°í˜ì´ìŠ¤ì—ë§Œ ì˜ì¡´í•˜ë„ë¡ ì˜ì¡´ê´€ê³„ë¥¼ ë³€ê²½í•˜ë©´ ëœë‹¤.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f3ff894b-b047-492b-a576-0550812ae050/Untitled.png)

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0afbf3e8-909c-45da-979c-0d30f55973f1/Untitled.png)

FixDiscountPolicy ì˜ì¡´ì„ ì•„ì˜ˆ ì‚­ì œ ì‹œí‚¤ê³  DiscountPolicy ë§Œ ì„ ì–¸í•´ì¤€ë‹¤. 

ì´ë ‡ê²Œë§Œ í•˜ë©´ null í¬ì¸í„° ìµì…‰ì…˜!

**êµ¬í˜„ì²´ê°€ ì—†ëŠ”ë° ì–´ë–»ê²Œ ì½”ë“œë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆì„ê¹Œ?**

- ëˆ„êµ°ê°€ê°€ í´ë¼ì´ì–¸íŠ¸ì¸ OrderServiceImplì— DiscountPolicyì˜ êµ¬í˜„ ê°ì²´ë¥¼ ëŒ€ì‹  ìƒì„±í•˜ê³  ì£¼ì…í•´ì£¼ì–´ì•¼ í•œë‹¤. â†’ ì–´ë–»ê²Œ?

## ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬

- ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í•˜ë‚˜ì˜ ê³µì—°ìœ¼ë¡œ ìƒê°í•´ë³´ì.
- ìœ„ì—ì„œ ë§Œë“  ì½”ë“œëŠ” ë‚¨ì ë°°ìš°(êµ¬í˜„ì²´) ì¤„ë¦¬ì—£ ì—­í• (ì¸í„°í˜ì´ìŠ¤)ì„ í•˜ëŠ” ì—¬ì ë°°ìš°(êµ¬í˜„ì²´)ë¥¼ ì§ì ‘ ì´ˆë¹™í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤. ë‚¨ì ë°°ìš°ëŠ” ë‚¨ì£¼ ì—­í• ë„ í•˜ë©´ì„œ ì—¬ì£¼ë„ ì§ì ‘ ê³µì—°ì— ì´ˆë¹™ì„ í•´ì•¼í•˜ëŠ” **â€œë‹¤ì–‘í•œ ì±…ì„â€**
- ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬í•˜ì!
    - ê³µì—° ê¸°íšìë¥¼ í•˜ë‚˜ ë§Œë“¤ë©´ ê°ìì˜ ì—­í• ì— ì§‘ì¤‘í•  ìˆ˜ ìˆë‹¤.
    - ì´ ê³µì—° ê¸°íšì ì—­í• ì„ í•˜ëŠ” ì‚¬ëŒì´ AppConfigê°€ ë˜ëŠ” ê²ƒì´ë‹¤.

### AppConfig

- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì „ì²´ ë™ì‘ë°©ì‹ì„ êµ¬ì„±(configure)í•˜ê¸° ìœ„í•´ì„œ êµ¬í˜„ ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ì—°ê²°í•˜ëŠ” ì±…ì„ì„ ê°€ì§€ëŠ” ë³„ë„ì˜ ì„¤ì • í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì.

**AppConfig.java**

```java
package core.order;

import core.order.discount.FixDiscountPolicy;
import core.order.member.MemberService;
import core.order.member.MemberServiceImpl;
import core.order.member.MemoryMemberRepository;
import core.order.order.OrderService;
import core.order.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService() {
        return new OrderServiceImpl(new MemoryMemberRepository(), new FixDiscountPolicy());
    }

}
```

- AppConfigëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì‹¤ì œ ë™ì‘ì— í•„ìš”í•œ êµ¬í˜„ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
- AppConfigëŠ” ìƒì„±í•œ ê°ì²´ ì¸ìŠ¤í„´ìŠ¤ì˜ ì°¸ì¡° ë ˆí¼ëŸ°ìŠ¤ë¥¼ **ìƒì„±ìë¥¼ í†µí•´ì„œ ì£¼ì…(ì—°ê²°)** í•´ì¤€ë‹¤.
- ì´ë¥¼ ìƒì„±ì ì£¼ì…ì´ë¼ê³  í•œë‹¤.

**MemberServiceImpl.java**

```java
package core.order.member;

public class MemberServiceImpl implements MemberService {
		//private final MemberRepository memberRepository = new MemoryMemberRepository();
    private MemberRepository memberRepository;

    public MemberServiceImpl(MemberRepository memberRepository){
        this.memberRepository = memberRepository;
    }

    @Override
    public void join(Member member) {
        memberRepository.save(member);
    }

    @Override
    public Member findMember(Long memberId) {
        return memberRepository.findById(memberId);
    }
}
```

- ì´ë ‡ê²Œ ìˆ˜ì •ì„ í•˜ê²Œ ë˜ë©´ MemberServiceImplì€ MemberRepository ì¸í„°í˜ì´ìŠ¤ë§Œ ì˜ì¡´í•˜ê²Œ ëœë‹¤.
- MemeberServiceImplì€ ìƒì„±ìë¥¼ í†µí•´ì„œ ì–´ë–¤ êµ¬í˜„ ê°ì²´ê°€ ë“¤ì–´ì˜¤ëŠ”ì§€ëŠ” ì•Œ ìˆ˜ ì—†ë‹¤.
- MemberServiceImplì€ **ì˜ì¡´ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì€ ì™¸ë¶€ì— ë§¡ê¸°ê³ ** **ë³¸ì¸ì˜ ì—­í• ì—ë§Œ ì¶©ì‹¤**í•  ìˆ˜ ìˆë‹¤.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4f9f7fa1-9b1c-4ee9-87f6-a42afd3cd683/Untitled.png)

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/15968956-5638-472a-93d5-ffcc3d2f8c1b/Untitled.png)

ë” ì´ìƒ MemberServiceImplì€ êµ¬í˜„ê°ì²´ë¥¼ ì˜ì¡´í•˜ì§€ ì•Šê²Œ ëœë‹¤. ê°ì²´ì˜ ìƒì„±ê³¼ ì—°ê²°ì€ ì™¸ë¶€ì¸ AppConfigë¥¼ í†µí•´ì„œ ì´ë£¨ì–´ì§„ë‹¤. 

â†’ **DIP ì„±ë¦½**

- ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬: ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì—°ê²°í•˜ëŠ” ì—­í• ê³¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì—ˆë‹¤.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/349066f3-6fb9-4086-bc08-c185ebd9259e/Untitled.png)

- appConfig ê°ì²´ëŠ” memeoryMemberRepository ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ê·¸ ì°¸ì¡°ê°’ì„ memberServiceImpleì„ ìƒì„±í•˜ë©´ì„œ ìƒì„±ìë¡œ ì „ë‹¬í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ì¸ memberServiceImpl ì…ì¥ì—ì„œ ë³´ë©´ ì˜ì¡´ê´€ê³„ë¥¼ ë§ˆì¹˜ ì™¸ë¶€ì—ì„œ ì£¼ì…í•´ì£¼ëŠ”  ê²ƒ ê°™ë‹¤ê³  í•´ì„œ DI (Dependency Injection) ì¦‰, ì˜ì¡´ê´€ê³„ ì£¼ì…ì´ë¼ í•œë‹¤.

```java
package core.order.order;

import core.order.discount.DiscountPolicy;
import core.order.member.MemberRepository;

import core.order.member.*;

public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice);

        return new Order(memberId, itemName, itemPrice, discountPrice);
    }
}
```

```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;

public class MemberApp {
    public static void main(String[] args) {
        AppConfig appConfig = new AppConfig();
        MemberService memberService = appConfig.memberService();
//        MemberService memberService = new MemberServiceImpl();
        Member member= new Member(1L,"memberA", Grade.VIP );
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = "+ member.getName());
        System.out.println("find Member = "+ findMember.getName());
    }
}
```

ì´ë ‡ê²Œ appConfigë¡œ memberServiceImpleì„ ë°›ì•„ì˜¤ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. 

**ì •ë¦¬**

- AppConfigë¥¼ í†µí•´ì„œ ê´€ì‹¬ì‚¬ë¥¼ í™•ì‹¤í•˜ê²Œ ë¶„ë¦¬í–ˆë‹¤.
- ë°°ì—­, ë°°ìš°ë¥¼ ìƒê°í•´ë³´ì.
- AppConfigëŠ” êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì„ íƒí•œë‹¤. ë°°ì—­ì— ë§ëŠ” ë‹´ë‹¹ë°°ìš°ë¥¼ ì„ íƒí•œë‹¤. ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì–´ë–»ê²Œ ë™ì‘í•´ì•¼ í• ì§€ ì „ì²´ êµ¬ì„±ì„ ì±…ì„ì§„ë‹¤.
- ì´ì œ ê° ë°°ìš°ë“¤ì€ ë‹´ë‹¹ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤.
- OrderServiceImpleì€ ê¸°ëŠ¥ì„ ì‹¤í–‰í•˜ëŠ” ì±…ì„ë§Œ ì§€ë©´ ëœë‹¤.

## AppConfig ë¦¬íŒ©í„°ë§

í˜„ì¬ AppConfigë¥¼ ë³´ë©´ ì¤‘ë³µì´ ìˆê³ , ì—­í• ì— ë”°ë¥¸ êµ¬í˜„ì´ ì˜ ì•ˆë³´ì¸ë‹¤. 

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/09192491-4d7d-4541-9ba4-817a301c5a49/Untitled.png)

ë¦¬íŒ©í„°ë§ ì „

```java
package hello.core;

import hello.core.discount.FIxDiscountPolicy;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.member.MemoryMemberRepository;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class AppConfig {
    public MemberService memberService(){
        return  new MemberServiceImpl(new MemoryMemberRepository());
    }

    public OrderService orderService(){
        return new OrderServiceImpl(new MemoryMemberRepository(), new FIxDiscountPolicy());

    }
}
```

ë¦¬íŒ©í„°ë§ í›„ 

```java
package core.order;

import core.order.discount.DiscountPolicy;
import core.order.discount.FixDiscountPolicy;
import core.order.member.MemberRepository;
import core.order.member.MemberService;
import core.order.member.MemberServiceImpl;
import core.order.member.MemoryMemberRepository;
import core.order.order.OrderService;
import core.order.order.OrderServiceImpl;

public class AppConfig {

    public MemberService memberService() {
        return new MemberServiceImpl(memberRepository());
    }

    private MemberRepository memberRepository() {
        return new MemoryMemberRepository();
    }

    public OrderService orderService() {
        return new OrderServiceImpl(memberRepository(), discountPolicy());
    }

    private DiscountPolicy discountPolicy() {
        return new FixDiscountPolicy();
    }

}
```

- ì—­í• ê³¼ êµ¬í˜„ì„ ëª…í™•í•˜ê²Œ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.
- MemberRepositoryì˜ êµ¬í˜„ì²´ë¥¼ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´ memberRepository()ì—ì„œ ë¦¬í„´í•´ì£¼ëŠ” êµ¬í˜„ì²´ë§Œ ë³€ê²½í•´ì£¼ë©´ ì „ì²´ê°€ ë™ì¼í•˜ê²Œ ë³€ê²½ë  ê²ƒì´ë‹¤.

## ìƒˆë¡œìš´ êµ¬ì¡°ì™€ í• ì¸ ì •ì±… ì ìš©

- ì •ì•¡í• ì¸ ì •ì±…ì„ ì •ë¥ í• ì¸ ì •ì²´ìœ¼ë¡œ ë³€ê²½í•´ë³´ì
- ì–´ë–¤ ë¶€ë¶„ë§Œ ë³€ê²½í•˜ë©´ ë˜ê² ëŠ”ê°€?

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/8ca921cb-5d7e-419f-910a-2ac18f2ea4cf/Untitled.png)

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/abbd90d3-1108-4a6d-b148-b8b4caac0109/Untitled.png)


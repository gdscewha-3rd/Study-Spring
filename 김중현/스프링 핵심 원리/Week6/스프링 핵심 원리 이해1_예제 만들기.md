## Section 2. ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ ì´í•´1 - ì˜ˆì œ ë§Œë“¤ê¸°
### ğŸ“Œ ëª©ì°¨
```
1. í”„ë¡œì íŠ¸ ìƒì„±
2. ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„
3. íšŒì› ë„ë©”ì¸
	3-1. íšŒì› ë„ë©”ì¸ ì„¤ê³„
	3-2. íšŒì› ë„ë©”ì¸ ê°œë°œ
	3-3. íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸
4. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸
	4-1. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„
	4-2. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ 
	4-3. ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸
```
<br>
<br>
<br>

### í”„ë¡œì íŠ¸ ìƒì„±
> ì¼ë‹¨ ìŠ¤í”„ë§ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆœìˆ˜ ìë°”ë¥¼ ì´ìš©í•´ ì˜ˆì œë¥¼ ë§Œë“¤ì–´ ë³¸ í›„, ë¶ˆí¸í•œ ì ì„ ìŠ¤í”„ë§ìœ¼ë¡œ ê°œì„ í•´ë³´ê¸°

- ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„° ì‚¬ì´íŠ¸ë¥¼ í†µí•´ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³  ì´ˆê¸° ì„¸íŒ…í•˜ê¸°
    - í”„ë¡œì íŠ¸ ì„ íƒ
        - Project: Gradle Project
        - Spring Boot: 2.6.x (SNAPSHOT, M ë²„ì „ ì œì™¸ ê°€ì¥ ë†’ì€ ë²„ì „ìœ¼ë¡œ)
        - Language: Java 
        - Packaging: Jar
        - Java: 11 
    - Project Metadata
      - groupId: hello
      - artifactId: core 
    - Dependencies: ì•„ë¬´ê²ƒë„ ì„ íƒí•˜ì§€ ì•ŠëŠ”ë‹¤. (ì¼ë‹¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìµœì†Œí•œìœ¼ë¡œ ì‚¬ìš©í•´ ìˆœìˆ˜ ìë°”ë¡œ êµ¬í˜„)

<br>
<br>
<br>

### ë¹„ì¦ˆë‹ˆìŠ¤ ìš”êµ¬ì‚¬í•­ê³¼ ì„¤ê³„
- íšŒì›
```
- íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤.
- íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ë„ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ë„ ìˆë‹¤. (ë¯¸í™•ì •)
```

- ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±…
```
- íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
- íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
- í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš©í•´ë‹¬ë¼. (ë³€ê²½ë  ìˆ˜ ìˆë‹¤.)
- í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤. ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ ë„ ìˆë‹¤. (ë¯¸í™•ì •)
```
â†’ ìš”êµ¬ì‚¬í•­ì„ ë³´ë©´ íšŒì› ë°ì´í„°ë‚˜ í• ì¸ ì •ì±… ê°™ì€ ë¶€ë¶„ì€ ì§€ê¸ˆ ê²°ì •í•˜ê¸° ì–´ë ¤ìš´ ë¶€ë¶„ì´ë‹¤. ê·¸ë ‡ë‹¤ê³  ì´ëŸ° ì •ì±…ì´ ê²°ì •ë  ë•Œê¹Œì§€ ê°œë°œì„ ë¯¸ë£° ìˆ˜ë„ ì—†ë‹¤. <br>
  ê·¸ëŸ¬ë¯€ë¡œ ê°ì²´ ì§€í–¥ ì„¤ê³„ ë°©ë²•ì„ ë”°ë¼, ì¸í„°í˜ì´ìŠ¤ë¥¼ ë§Œë“¤ê³  êµ¬í˜„ì²´ë¥¼ ì–¸ì œë“ ì§€ ê°ˆì•„ë¼ìš¸ ìˆ˜ ìˆë„ë¡ ì„¤ê³„í•´ ê°œë°œì„ ì‹œì‘í•˜ë©´ ëœë‹¤!
  
<br>
<br>
<br>

### íšŒì› ë„ë©”ì¸ ì„¤ê³„
#### íšŒì› ë„ë©”ì¸ ìš”êµ¬ì‚¬í•­ ì •ë¦¬
```
- íšŒì›ì„ ê°€ì…í•˜ê³  ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
- íšŒì›ì€ ì¼ë°˜ê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ì´ ìˆë‹¤.
- íšŒì› ë°ì´í„°ëŠ” ìì²´ DBë¥¼ êµ¬ì¶•í•  ìˆ˜ë„ ìˆê³ , ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì—°ë™í•  ìˆ˜ë„ ìˆë‹¤. (ë¯¸í™•ì •)
```
<br>

#### íšŒì› ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„
> ê¸°íšìë“¤ë„ ë³¼ ìˆ˜ ìˆëŠ” ê·¸ë¦¼
<img width="680" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-17 á„‹á…©á„Œá…¥á†« 11 37 44" src="https://user-images.githubusercontent.com/80838501/168717032-e5b78d73-0a3c-47a3-bb17-faef84f1601d.png">

â†’ ì—­í• (ì¸í„°í˜ì´ìŠ¤): í´ë¼ì´ì–¸íŠ¸, íšŒì› ì„œë¹„ìŠ¤, íšŒì› ì €ì¥ì†Œ <br>
  êµ¬í˜„(êµ¬í˜„ì²´): ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ, DB íšŒì› ì €ì¥ì†Œ, ì™¸ë¶€ ì‹œìŠ¤í…œ ì—°ë™ íšŒì› ì €ì¥ì†Œ <br>
  
â†’ ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ: ê°„ë‹¨íˆ ë¡œì»¬ì—ì„œ ê°œë°œ, í…ŒìŠ¤íŠ¸í•  ë•Œ ì‚¬ìš© (ì»´í“¨í„°ë¥¼ ì¬ë¶€íŒ…í•˜ë©´ ë‹¤ ì—†ì–´ì§€ë¯€ë¡œ, ë”± ê°œë°œìš©ìœ¼ë¡œë§Œ ì‚¬ìš©) 
<br>
<br>

#### íšŒì› í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
> ê°œë°œìê°€ ë„ë©”ì¸ í˜‘ë ¥ ê´€ê³„ ê·¸ë¦¼ì„ ë°”íƒ•ìœ¼ë¡œ êµ¬ì²´í™”í•´ì„œ ë§Œë“œëŠ” ê·¸ë¦¼
<img width="678" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-17 á„‹á…©á„Œá…¥á†« 11 41 05" src="https://user-images.githubusercontent.com/80838501/168717355-aa086e62-ceab-43c6-ae63-b7807cd0934c.png">

â†’ ì¸í„°í˜ì´ìŠ¤: MembrService(íšŒì› ì„œë¹„ìŠ¤), MemberRepository(íšŒì› ì €ì¥ì†Œ) <br>
  êµ¬í˜„ì²´: MemberServiceImpl (íšŒì› ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•œ êµ¬í˜„ì²´), MemoryMemberRepository (ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ), DbMemberRepository <br>
  (DB íšŒì› ì €ì¥ì†Œ)
<br>
<br>

#### íšŒì› ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨
> ì„œë²„ê°€ ëœ° ë•Œ ë™ì ìœ¼ë¡œ ê²°ì •ë˜ëŠ”, í´ë¼ì´ì–¸íŠ¸ê°€ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ë¥¼ í‘œí˜„í•´ë†“ì€ ê·¸ë¦¼
<img width="680" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-17 á„‹á…©á„’á…® 2 46 44" src="https://user-images.githubusercontent.com/80838501/168738223-fb8ca955-c499-4667-b73f-73582d2b279e.png">

â†’ ê°ì²´ ê°„ ì°¸ì¡°ê°€ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ í‘œí˜„ <br>
â†’ íšŒì› ì„œë¹„ìŠ¤ = MemberServiceImpl, ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ = MemoryMemberRepository
<br>
<br>
<br>


### íšŒì› ë„ë©”ì¸ ê°œë°œ
#### íšŒì› ì—”í‹°í‹°

**Grade (enum)**
```java
package hello.core.member;

public enum Grade {
    Basic,
    VIP
}
```
â†’ Basicê³¼ VIP ë‘ ê°€ì§€ ë“±ê¸‰ ì¡´ì¬
<br>
<br>

**Member**
```java
package hello.core.member;

public class Member {
    private Long id;
    private String name;
    private Grade grade;

    public Member(Long id, String name, Grade grade) {
        this.id = id;
        this.name = name;
        this.grade = grade;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Grade getGrade() {
        return grade;
    }

    public void setGrade(Grade grade) {
        this.grade = grade;
    }
}
```
â†’ íšŒì› ì—”í‹°í‹° <br>
â†’ ìƒì„±ì, getter/setter
<br>
<br>
<br>

#### íšŒì› ì €ì¥ì†Œ
**MemberRepository (ì¸í„°í˜ì´ìŠ¤)**
```java
package hello.core.member;

public interface MemberRepository {

    void save(Member member);

    Member findById(Long memberId);
}
```
â†’ ì €ì¥ ê¸°ëŠ¥ê³¼ Idë¡œ íšŒì›ì„ ì°¾ëŠ” ê¸°ëŠ¥
<br>
<br>

**MemoryMemberRepository (êµ¬í˜„ì²´)**
> ê°œë°œ ë° í…ŒìŠ¤íŠ¸ ì§„í–‰ì„ ìœ„í•´ ì¼ë‹¨ ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ êµ¬í˜„. ë‚˜ì¤‘ì— DBê°€ í™•ì •ë˜ë©´ ê°ˆì•„ë¼ìš°ì!
```java
package hello.core.member;

import java.util.HashMap;
import java.util.Map;

public class MemoryMemberRepository implements MemberRepository {

    private static Map<Long, Member> store = new HashMap<>();

    @Override
    public void save(Member member) {
        store.put(member.getId(), member);
    }

    @Override
    public Member findById(Long memberId) {
        return store.get(memberId);
    }
}
```
â†’ êµ¬í˜„ì²´ì™€ ì¸í„°í˜ì´ìŠ¤ëŠ” ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì— ë‘ëŠ” ê²ƒì´ ì„¤ê³„ ìƒ ì¢‹ë‹¤ (ì´ ì˜ˆì œì—ì„œëŠ” ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì— ë‘ë©´ ë„ˆë¬´ ë³µì¡í•´ì ¸ì„œ ê·¸ëƒ¥ ê°™ì€ íŒ¨í‚¤ì§€ì— ë‘ê¸°) <br>
â†’ MemberRepository ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ êµ¬í˜„í•œ êµ¬í˜„ì²´ <br>
â†’ ì‹¤ë¬´ì—ì„œëŠ” ë™ì‹œì„± ì´ìŠˆê°€ ë°œìƒí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— `ConcurrentHashMap`ì„ ì¨ì•¼ í•œë‹¤.
<br>
<br>
<br>

#### íšŒì› ì„œë¹„ìŠ¤
**MemberService (ì¸í„°í˜ì´ìŠ¤)**
```java
package hello.core.member;

public interface MemberService {

    void join(Member member);

    Member findMember(Long memberId);
}
```
â†’ íšŒì› ë“±ë¡ ê¸°ëŠ¥ê³¼ íšŒì›ì„ ì°¾ëŠ” ê¸°ëŠ¥
<br>
<br>

**MemberServiceImpl (êµ¬í˜„ì²´)**
> êµ¬í˜„ì²´ê°€ í•˜ë‚˜ë§Œ ìˆì„ ë•ŒëŠ” ê´€ë¡€ìƒ êµ¬í˜„ì²´ì˜ ì´ë¦„ì„ `ì¸í„°í˜ì´ìŠ¤ëª… + Impl`ë¡œ ë§ì´ ì“´ë‹¤. 
```java
package hello.core.member;

public class MemberServiceImpl implements MemberService {
   
    private final MemberRepository memberRepository = new MemoryMemberRepository();
  
	public void join(Member member) {
        memberRepository.save(member);
	}
   
    public Member findMember(Long memberId) {
   	    return memberRepository.findById(memberId);
    } 
}
```
â†’ MemberService ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ êµ¬í˜„í•œ êµ¬í˜„ì²´ <br>
â†’ NullPointExceptionì´ ë°œìƒí•˜ì§€ ì•Šë„ë¡ êµ¬í˜„ê°ì²´ ì„ íƒí•´ì£¼ê¸° (new MemoryMemberRepository())
<br>
<br>
<br>
<br>

### íšŒì› ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸
#### íšŒì› ë„ë©”ì¸ - íšŒì› ê°€ì… main
**MemberApp**
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;

public class MemberApp {

    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        Member member = new Member(1L, "memberA", Grade.VIP);
        memberService.join(member);

        Member findMember = memberService.findMember(1L);
        System.out.println("new member = " + member.getName());
        System.out.println("find Member = " + findMember.getName());
    }
}
```
â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì€ í•œê³„ê°€ ì¡´ì¬í•˜ê³ , ë§¤ë²ˆ ëˆˆìœ¼ë¡œ í™•ì¸í•´ì•¼ í•˜ëŠ” ë‹¨ì ì´ ìˆë‹¤. <br>
	â†’ `JUnit`ì´ë¼ëŠ” í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì!
<br>
<br>
<br>

#### íšŒì› ë„ë©”ì¸ - íšŒì› ê°€ì… í…ŒìŠ¤íŠ¸
**MemberServiceTest**
```java
package hello.core.member;

import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

public class MemberServiceTest {

    MemberService memberService = new MemberServiceImpl();

    @Test
    void join() {
        //given
        Member member = new Member(1L, "memberA", Grade.VIP);

        //when
        memberService.join(member);
        Member findMember = memberService.findMember(1L);

        //then
        Assertions.assertThat(member).isEqualTo(findMember);
    }
}
```
â†’ @Test annotation (assertj api ì‚¬ìš©) <br>
â†’ given - when - then: ì´ëŸ° ê²ƒë“¤ì´ ì£¼ì–´ì¡Œì„ ë•Œ (given), ì´ë ‡ê²Œ í–ˆì„ ë•Œ (when), ì´ë ‡ê²Œ ëœë‹¤ (then).
<br>
<br>
<br>

#### íšŒì› ë„ë©”ì¸ ì„¤ê³„ì˜ ë¬¸ì œì 
- ë‹¤ë¥¸ ì €ì¥ì†Œë¡œ ë³€ê²½í•  ë•Œ OCP ì›ì¹™ì„ ì˜ ì¤€ìˆ˜í• ê¹Œ?
- DIPë¥¼ ì˜ ì§€í‚¤ê³  ìˆëŠ”ê°€?
- ì˜ì¡´ê´€ê³„ê°€ ì¸í„°í˜ì´ìŠ¤ë¿ë§Œ ì•„ë‹ˆë¼ êµ¬í˜„ê¹Œì§€ ëª¨ë‘ ì˜ì¡´í•˜ëŠ” ë¬¸ì œì ì´ ì¡´ì¬ <br>
â†’ `MemberServiceImpl`ì´ `MemberRepository`(ì¸í„°í˜ì´ìŠ¤)ì™€ `MemoryMemberRepository` (êµ¬í˜„ì²´) ë‘˜ ë‹¤ì— ì˜ì¡´ <br>
â†’ DIP ìœ„ë°˜!
- ì£¼ë¬¸ê¹Œì§€ ê°œë°œí•˜ê³  ë‚œ í›„ ë¬¸ì œì ê³¼ í•´ê²° ë°©ì•ˆì— ëŒ€í•´ ì•Œì•„ë³´ì!
<br>
<br>
<br>

### ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì„¤ê³„
#### ì£¼ë¬¸ê³¼ í• ì¸ ì •ì±… ì •ë¦¬
```
- íšŒì›ì€ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤.
- íšŒì› ë“±ê¸‰ì— ë”°ë¼ í• ì¸ ì •ì±…ì„ ì ìš©í•  ìˆ˜ ìˆë‹¤.
- í• ì¸ ì •ì±…ì€ ëª¨ë“  VIPëŠ” 1000ì›ì„ í• ì¸í•´ì£¼ëŠ” ê³ ì • ê¸ˆì•¡ í• ì¸ì„ ì ìš© (ë‚˜ì¤‘ì— ë³€ê²½ë  ìˆ˜ ìˆë‹¤.)
- í• ì¸ ì •ì±…ì€ ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤. íšŒì‚¬ì˜ ê¸°ë³¸ í• ì¸ ì •ì±…ì„ ì•„ì§ ì •í•˜ì§€ ëª»í–ˆê³ , ì˜¤í”ˆ ì§ì „ê¹Œì§€ ê³ ë¯¼ì„ ë¯¸ë£¨ê³  ì‹¶ë‹¤.
  ìµœì•…ì˜ ê²½ìš° í• ì¸ì„ ì ìš©í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤. (ë¯¸í™•ì •)
```
<br>
<br>

#### ì£¼ë¬¸ ë„ë©”ì¸ í˜‘ë ¥, ì—­í• , ì±…ì„
<img width="642" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-17 á„‹á…©á„’á…® 8 31 58" src="https://user-images.githubusercontent.com/80838501/168801571-9c7fc8a4-f96b-4d58-8b23-9b0d4b64bd63.png">

```
í´ë¼ì´ì–¸íŠ¸ê°€ ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ì£¼ë¬¸ ìƒì„±ì„ ìš”ì²­í•˜ë©´ ë¨¼ì € íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì› ì¡°íšŒë¥¼ í•´ íšŒì›ì˜ ë“±ê¸‰ì„ ì•Œì•„ë‚¸ë‹¤. ê·¸ íšŒì› ë“±ê¸‰ì„ ê°€ì§€ê³  í• ì¸ ì •ì±… ì—­í• ì— 
í• ì¸ ì ìš©ì´ ê°€ëŠ¥í•œì§€ ë¬¼ì–´ë³¸ë‹¤. ì ìš©ì´ ê°€ëŠ¥í•˜ë©´ í• ì¸ ì ìš©í•œ ê²°ê³¼ë¥¼ ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ë‚´ë ¤ì£¼ê³ , ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” í• ì¸ê¹Œì§€ ì ìš©ëœ ìµœì¢… ì£¼ë¬¸ ê²°ê³¼ë¥¼ í´ë¼ì´ì–¸íŠ¸ì—
ë°˜í™˜í•´ì¤€ë‹¤.
```
â†’ ë‹¨ê³„ë³„ ì •ë¦¬
1. `ì£¼ë¬¸ ìƒì„±`: í´ë¼ì´ì–¸íŠ¸ëŠ” ì£¼ë¬¸ ì„œë¹„ìŠ¤ì— ì£¼ë¬¸ ìƒì„±ì„ ìš”ì²­í•œë‹¤.
2. `íšŒì› ì¡°íšŒ`: í• ì¸ì„ ìœ„í•´ì„œëŠ” íšŒì› ë“±ê¸‰ì´ í•„ìš”í•˜ë‹¤. ê·¸ë˜ì„œ ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì›ì„ ì¡°íšŒí•œë‹¤.
3. `í• ì¸ ì ìš©`: ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” íšŒì› ë“±ê¸‰ì— ë”°ë¥¸ í• ì¸ ì—¬ë¶€ë¥¼ í• ì¸ ì •ì±…ì— ìœ„ì„í•œë‹¤.
4. `ì£¼ë¬¸ ê²°ê³¼ ë°˜í™˜`: ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” í• ì¸ ê²°ê³¼ë¥¼ í¬í•¨í•œ ì£¼ë¬¸ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤. (ì‹¤ì œë¡œëŠ” ì£¼ë¬¸ ë°ì´í„°ë¥¼ DBì— ì €ì¥í•˜ì§€ë§Œ, ì´ ì˜ˆì œì—ì„œëŠ” ì£¼ë¬¸ ê²°ê³¼ë¥¼ ë‹¨ìˆœíˆ<br>
    ë°˜í™˜)
<br>
<br>

#### ì£¼ë¬¸ ë„ë©”ì¸ ì „ì²´ (ì—­í•  + êµ¬í˜„)
<img width="642" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-17 á„‹á…©á„’á…® 8 49 21" src="https://user-images.githubusercontent.com/80838501/168804259-9d795d56-62ff-4f2f-accb-1088c5cee177.png">

â†’ ì—­í• ê³¼ êµ¬í˜„ì„ ë¶„ë¦¬í•´ì„œ êµ¬í˜„í–ˆê¸° ë•Œë¬¸ì— êµ¬í˜„ì²´ë¥¼ ììœ ë¡­ê²Œ ë°”ê¿” ë‚„ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. 
<br>
<br>
<br>

#### ì£¼ë¬¸ ë„ë©”ì¸ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨
> ê°ì²´ ë ˆë²¨ë¡œ êµ¬í˜„
<img width="642" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-17 á„‹á…©á„’á…® 8 55 22" src="https://user-images.githubusercontent.com/80838501/168805283-24047f72-da2e-4404-b19c-c791b7287245.png">

â†’ ì¸í„°í˜ì´ìŠ¤: OrderService (ì£¼ë¬¸ ì„œë¹„ìŠ¤ ì—­í• ), MemberRepository (íšŒì› ì €ì¥ì†Œ ì—­í• ), DiscountPolicy (í• ì¸ ì •ì±… ì—­í• ) <br>
ã€€êµ¬í˜„ì²´: OrderServiceImpl(ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´), MemoryMemberRepository (ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ), DbMemberRepository (DB íšŒì› ì €ì¥ì†Œ), 
ã€€FixDiscountPolicy (ì •ì•¡ í• ì¸ ì •ì±…), RateDiscountPolicy (ì •ë¥  í• ì¸ ì •ì±…)

<br>
<br>

#### ì£¼ë¬¸ ë„ë©”ì¸ ê°ì²´ ë‹¤ì´ì–´ê·¸ë¨
> ë™ì ìœ¼ë¡œ ê°ì²´ë“¤ì˜ ì—°ê´€ê´€ê³„ê°€ ë§ºì–´ì§€ëŠ” ê·¸ë¦¼
<img width="645" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-17 á„‹á…©á„’á…® 8 56 10" src="https://user-images.githubusercontent.com/80838501/168805768-276e17a7-bfd3-4e5f-adb1-480889b63a67.png">

â†’ í´ë¼ì´ì–¸íŠ¸ê°€ ì£¼ë¬¸ì„œë¹„ìŠ¤êµ¬í˜„ì²´ (OrderServiceImpl)ë¥¼ í˜¸ì¶œí•˜ë©´ ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œ (MemoryMemberRepository)ê°€ í˜¸ì¶œëœë‹¤. <br>
  ë‹¤ì‹œ ë§í•´, í´ë¼ì´ì–¸íŠ¸ê°€ ì£¼ë¬¸ì„ ìƒì„±í•˜ë©´ ë©”ëª¨ë¦¬ íšŒì› ì €ì¥ì†Œì—ì„œ íšŒì›ì„ ì¡°íšŒí•œë‹¤.

â†’ ì €ì¥ì†Œì™€ í• ì¸ ì •ì±…ì´ ë³€ê²½ë˜ì–´ë„ ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ì™€ ì—­í• ë“¤ì˜ í˜‘ë ¥ ê´€ê³„ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€ëœë‹¤. <br>
  ë§Œì•½ ì €ì¥ì†Œê°€ DB íšŒì› ì €ì¥ì†Œë¡œ, í• ì¸ ì •ì±…ì´ ì •ë¥  í• ì¸ ì •ì±…ìœ¼ë¡œ ë³€ê²½ë˜ì–´ë„ ë‹¤ìŒê³¼ ê°™ì´ ì£¼ë¬¸ ì„œë¹„ìŠ¤ êµ¬í˜„ì²´ì™€ ì—­í• ë“¤ì˜ í˜‘ë ¥ ê´€ê³„ëŠ” ì¬ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
<br>

<img width="640" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-05-17 á„‹á…©á„’á…® 8 57 18" src="https://user-images.githubusercontent.com/80838501/168805799-8bdd6e68-ad59-448f-9ff8-e8176bc79294.png">
<br>
<br>
<br>

### ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ê°œë°œ
#### í• ì¸
**DiscountPolicy (ì¸í„°í˜ì´ìŠ¤)**
```java
package hello.core.discount;

import hello.core.member.Member;

public interface DiscountPolicy {

    /**
     * @return í• ì¸ ëŒ€ìƒ ê¸ˆì•¡
     */
    int discount(Member member, int price);
}
```
â†’ í• ì¸ ì •ì±… ì¸í„°í˜ì´ìŠ¤ <br>
â†’ `discount`ê°€ í˜¸ì¶œë˜ë©´ ì–¼ë§ˆë‚˜ í• ì¸ë˜ì—ˆëŠ”ì§€ ê·¸ ê¸ˆì•¡ì„ return
<br>
<br>
<br>

**FixDiscountPolicy (êµ¬í˜„ì²´ - ì •ì•¡í• ì¸ì •ì±…)**
```java
package hello.core.discount;

import hello.core.member.Grade;
import hello.core.member.Member;

public class FixDiscountPolicy implements DiscountPolicy {

    private int discountFixAmount = 1000; //1000ì› í• ì¸

    @Override
    public int discount(Member member, int price) {
        if (member.getGrade() == Grade.VIP) { //enumì€ ==ë¡œ ê°’ ë¹„êµ
            return discountFixAmount;
        } else {
            return 0;
        }
    }
}
```
â†’ enumì€ `==` ë¡œ ê°’ ë¹„êµ <br>
â†’ VIPë©´ discountFixAmount (1000ì›) return, ì•„ë‹ˆë©´ (ì¼ë°˜ íšŒì›ì´ë©´) 0 return
<br>
<br>
<br>
<br>

#### ì£¼ë¬¸
**Order**
```java
package hello.core.order;

public class Order {

    private Long memberId;
    private String itemName;
    private int itemPrice;
    private int discountPrice;

    public Order(Long memberId, String itemName, int itemPrice, int discountPrice) {
        this.memberId = memberId;
        this.itemName = itemName;
        this.itemPrice = itemPrice;
        this.discountPrice = discountPrice;
    }

    public int calculatePrice() {
        return itemPrice - discountPrice;
    }

    public Long getMemberId() {
        return memberId;
    }

    public void setMemberId(Long memberId) {
        this.memberId = memberId;
    }

    public String getItemName() {
        return itemName;
    }

    public void setItemName(String itemName) {
        this.itemName = itemName;
    }

    public int getItemPrice() {
        return itemPrice;
    }

    public void setItemPrice(int itemPrice) {
        this.itemPrice = itemPrice;
    }

    public int getDiscountPrice() {
        return discountPrice;
    }

    public void setDiscountPrice(int discountPrice) {
        this.discountPrice = discountPrice;
    }

    @Override
    public String toString() {
        return "Order{" +
                "memberId=" + memberId +
                ", itemName='" + itemName + '\'' +
                ", itemPrice=" + itemPrice +
                ", discountPrice=" + discountPrice +
                '}';
    }
}
``` 
â†’ ì£¼ë¬¸í–ˆì„ ë•Œ, í• ì¸ì´ ë‹¤ ëë‚˜ê³  ë§Œë“¤ì–´ì§€ëŠ” ê°ì²´ <br>
â†’ ìƒì„±ì, getter/setter, ìµœì¢… ê¸ˆì•¡ì„ ê³„ì‚°í•˜ëŠ” `calculatePrice()` <br>
â†’ ê°ì²´ë¥¼ ì¶œë ¥í•˜ë©´, ê·¸ ê°ì²´ì˜ `toString`ì´ í˜¸ì¶œëœë‹¤. (ê°ì²´ì— ëŒ€í•œ ì •ë³´ë¥¼ ë³´ê¸° ì‰½ê²Œ ì¶œë ¥)
<br>
<br>
<br>

**OrderService (ì¸í„°í˜ì´ìŠ¤)**
```java
package hello.core.order;

public interface OrderService {
    Order createOrder(Long memberId, String itemName, int itemPrice);
}
```
â†’ memberIdì™€ itemName, itemPriceë¥¼ ë°›ì•„ ì£¼ë¬¸ì„ ìƒì„±í•˜ëŠ” `createOrder()`
<br>
<br>
<br>

**OrderServiceImpl (êµ¬í˜„ì²´)**
```java
package hello.core.order;

import hello.core.discount.DiscountPolicy;
import hello.core.discount.FixDiscountPolicy;
import hello.core.member.Member;
import hello.core.member.MemberRepository;
import hello.core.member.MemoryMemberRepository;

public class OrderServiceImpl implements OrderService {

    private final MemberRepository memberRepository = new MemoryMemberRepository();
    private final DiscountPolicy discountPolicy = new FixDiscountPolicy();

    @Override
    public Order createOrder(Long memberId, String itemName, int itemPrice) {
        Member member = memberRepository.findById(memberId);
        int discountPrice = discountPolicy.discount(member, itemPrice); //ìµœì¢… í• ì¸ëœ ê°€ê²©

        return new Order(memberId, itemName, itemPrice, discountPrice); //ìµœì¢… ìƒì„±ëœ ì£¼ë¬¸ return
    }
}
```
- OrderServiceImpl ì…ì¥ì—ì„œëŠ” í• ì¸ì— ëŒ€í•´ì„œëŠ” ì „í˜€ ëª¨ë¥´ê³  ìˆê³ , ê·¸ ì±…ì„ì„ discountPolicyì— ë„˜ê²¨ ê·¸ ê²°ê³¼ë§Œ ë°›ì•„ ì²˜ë¦¬í•œë‹¤. <br>
â†’ **ë‹¨ì¼ ì²´ê³„ ì›ì¹™ ì¤€ìˆ˜!** <br>
â†’ í• ì¸ì— ëŒ€í•œ ë³€ê²½ì´ í•„ìš”í•˜ë©´ í• ì¸ ìª½ë§Œ ìˆ˜ì •í•˜ë©´ ë˜ê³ , ì£¼ë¬¸ ìª½ì€ ìˆ˜ì •í•  í•„ìš”ê°€ ì—†ê¸° ë•Œë¬¸
<br>
<br>
<br>
<br>

### ì£¼ë¬¸ê³¼ í• ì¸ ë„ë©”ì¸ ì‹¤í–‰ê³¼ í…ŒìŠ¤íŠ¸
**OrderApp**
```java
package hello.core;

import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import hello.core.order.Order;
import hello.core.order.OrderService;
import hello.core.order.OrderServiceImpl;

public class OrderApp {

    public static void main(String[] args) {
        MemberService memberService = new MemberServiceImpl();
        OrderService orderService = new OrderServiceImpl();

        Long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);

        System.out.println("order = " + order);
        System.out.println("order.calculatePrice = " + order.calculatePrice());
    }
}
```
â†’ memberë¥¼ ìƒì„±í•´ joiní•œ ë’¤ createOrder()ë¡œ ì£¼ë¬¸ ìƒì„± <br>
â†’ ìƒì„±ëœ ì£¼ë¬¸ ê°ì²´ë¥¼ ì¶œë ¥í•´ë³´ê³ , í• ì¸ëœ ê¸ˆì•¡ë„ ì¶œë ¥í•´ë³´ê¸° <br>
â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ ë¡œì§ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ì§€ ë§ê³  `JUnit í…ŒìŠ¤íŠ¸`ë¥¼ ì´ìš©í•´ë³´ì!
<br>
<br>
<br>

**OrderServiceTest**
```java
package hello.core.order;
import hello.core.member.Grade;
import hello.core.member.Member;
import hello.core.member.MemberService;
import hello.core.member.MemberServiceImpl;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

class OrderServiceTest {

    MemberService memberService = new MemberServiceImpl();
    OrderService orderService = new OrderServiceImpl();

    @Test
    void createOrder() {
        long memberId = 1L;
        Member member = new Member(memberId, "memberA", Grade.VIP);
        memberService.join(member);

        Order order = orderService.createOrder(memberId, "itemA", 10000);
        Assertions.assertThat(order.getDiscountPrice()).isEqualTo(1000);
    }
}
```
â†’ @Test annotation <br>
â†’ **assertThat**ìœ¼ë¡œ ê²€ì¦
